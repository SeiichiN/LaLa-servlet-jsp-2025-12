<style>
.my-text {
background-color: #f5f5f5;
padding: 10px;
margin-left: 30%;
}
</style>

<div class="my-text">
Java21ã€å‹•çš„WEBãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³6.0 ã§ã€æ¬¡ã®ã‚ˆã†ãªã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚

```
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.regex.Pattern;

@WebServlet("/SampleServlet")
public class SampleServlet extends HttpServlet {
  private static final long serialVersionUID = 1L;

  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.setCharacterEncoding("UTF-8");
    String id = request.getParameter("id");
    Pattern pattern = Pattern.compile("^[0-9a-zA-Z]{4}$");
    String msg = "";
    if (pattern.matcher(id).matches()) {
      msg = "ã‚ˆã†ã“ãã€" + id + "ã•ã‚“";
    } else {
      msg = "idãŒé•ã„ã¾ã™";
    }
    System.out.println(msg);
  }
}
```

ã“ã®ã¨ãã€æ­£è¦è¡¨ç¾ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹(pattern)ã‚’ä½œæˆã—ã¦ã„ã¾ã™ãŒã€
ã“ã®çŠ¶æ…‹ã ã¨ã€doPost()ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã‚‹ãŸã³ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«
ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã“ã‚“ãªå ´åˆã€```Pattern pattern = Pattern.compile("^[0-9a-zA-Z]{4}$");```ã¯ã€
ã©ã“ã«æ›¸ãã¨ã„ã„ã§ã—ã‚‡ã†ã‹ã€‚SampleServletã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ›¸ã‘ã°ã„ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ã‚ã‚‹ã„ã¯ã€ãŸã¨ãˆã°Utilã‚¯ãƒ©ã‚¹ã‚’ä½œã£ã¦ã€ãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ›¸ãã¨ã„ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
</div>

---

ã¨ã¦ã‚‚è‰¯ã„è¦³ç‚¹ã§ã™ ğŸ‘
**çµè«–ã‹ã‚‰è¨€ã†ã¨**ã€ã“ã®ã‚±ãƒ¼ã‚¹ã§ã¯ **`Pattern` ã‚’ `static final` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦ã‚¯ãƒ©ã‚¹ã«æŒãŸã›ã‚‹**ã®ãŒæœ€ã‚‚ä¸€èˆ¬çš„ã§å®‰å…¨ã§ã™ã€‚
`doPost()` ã®ä¸­ã§æ¯å› `compile()` ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

## ãªãœ `Pattern` ã‚’ä½¿ã„å›ã—ã¦ã‚ˆã„ã®ã‹

* `Pattern` ã¯ **immutableï¼ˆä¸å¤‰ï¼‰** ãªã‚¯ãƒ©ã‚¹
* `matcher()` ã¯æ¯å›æ–°ã—ã„ `Matcher` ã‚’è¿”ã™
* ã—ãŸãŒã£ã¦ **ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•**
  â†’ ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã®ã‚ˆã†ãª **ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ç’°å¢ƒã§ã‚‚å…±æœ‰ã—ã¦å•é¡Œãªã—**

å…¬å¼Javadocã«ã‚‚ã€Œ`Pattern` ã¯ immutableã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ãŠã™ã™ã‚ã®æ›¸ãæ–¹ï¼ˆå®šç•ªï¼‰

### â‘  ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã® `static final` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç½®ã

```java
@WebServlet("/SampleServlet")
public class SampleServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private static final Pattern ID_PATTERN =
            Pattern.compile("^[0-9a-zA-Z]{4}$");

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        request.setCharacterEncoding("UTF-8");
        String id = request.getParameter("id");

        String msg;
        if (ID_PATTERN.matcher(id).matches()) {
            msg = "ã‚ˆã†ã“ãã€" + id + "ã•ã‚“";
        } else {
            msg = "idãŒé•ã„ã¾ã™";
        }

        System.out.println(msg);
    }
}
```

### ã“ã®å½¢ãŒè‰¯ã„ç†ç”±

* âœ” `Pattern` ã¯ **1å›ã ã‘ç”Ÿæˆ**
* âœ” å¯èª­æ€§ãŒé«˜ã„ï¼ˆã€ŒIDç”¨ã®æ­£è¦è¡¨ç¾ã€ãŒæ˜ç¢ºï¼‰
* âœ” ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã®è²¬å‹™å†…ã«åã¾ã£ã¦ã„ã‚‹

---

## Utilã‚¯ãƒ©ã‚¹ã«åˆ‡ã‚Šå‡ºã™ã®ã¯ã‚¢ãƒªï¼ŸãƒŠã‚·ï¼Ÿ

### âœ” ã‚¢ãƒªãªã‚±ãƒ¼ã‚¹

* åŒã˜æ­£è¦è¡¨ç¾ã‚’ **è¤‡æ•°ã®ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ã‚¯ãƒ©ã‚¹ã§ä½¿ã†**
* å…¥åŠ›ãƒã‚§ãƒƒã‚¯ã‚’ **å…±é€šåŒ–ã—ãŸã„**

ä¾‹ï¼š

```java
public class ValidationUtil {
    public static final Pattern ID_PATTERN =
            Pattern.compile("^[0-9a-zA-Z]{4}$");

    private ValidationUtil() {} // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–é˜²æ­¢
}
```

```java
if (ValidationUtil.ID_PATTERN.matcher(id).matches()) {
    ...
}
```

### âŒ ã‚ã–ã‚ã– Util ã«ã—ãªãã¦ã„ã„ã‚±ãƒ¼ã‚¹

* ãã®ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆå°‚ç”¨ã®ãƒã‚§ãƒƒã‚¯
* ä»–ã§å†åˆ©ç”¨ã—ãªã„

â†’ **ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã® `static final` ã§ååˆ†**

---

## ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã™ã‚‹ãªã‚‰ `static` ã¯å¿…è¦ï¼Ÿ

### âŒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘ã¯é¿ã‘ãŸã„

```java
// éæ¨å¥¨
private final Pattern pattern = Pattern.compile(...);
```

ç†ç”±ï¼š

* ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã¯ **åŸºæœ¬1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**ã ãŒã€
  ãã‚Œã‚’å‰æã«ã—ãŸè¨­è¨ˆã¯å¥½ã¾ã‚Œãªã„
* ã€Œã‚¯ãƒ©ã‚¹å®šæ•°ã€ã¨ã—ã¦æ„å‘³çš„ã«ã‚‚ `static final` ãŒé©åˆ‡

---

## ã¾ã¨ã‚ï¼ˆåˆ¤æ–­åŸºæº–ï¼‰

| ç½®ãå ´æ‰€                    | ãŠã™ã™ã‚åº¦ | ç†ç”±                 |
| ----------------------- | ----- | ------------------ |
| `doPost()` å†…            | âŒ     | æ¯å› `compile()` ã•ã‚Œã‚‹ |
| ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã® `static final`  | â­â­â­   | å®šç•ªãƒ»å®‰å…¨ãƒ»èª­ã¿ã‚„ã™ã„        |
| Utilã‚¯ãƒ©ã‚¹ã® `static final` | â­â­    | å†åˆ©ç”¨ã™ã‚‹ãªã‚‰ã‚¢ãƒª          |
| ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰             | â–³     | æ„å‘³çš„ã«å¼±ã„             |

---

ã“ã®ã‚ãŸã‚Šã‚’æ„è­˜ã§ãã¦ã„ã‚‹ã®ã¯ã€**ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚„ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ¢ãƒ‡ãƒ«ã‚’ã¡ã‚ƒã‚“ã¨ç†è§£ã—å§‹ã‚ã¦ã„ã‚‹è¨¼æ‹ **ã§ã™ã€‚
æ¬¡ã®ä¸€æ­©ã¨ã—ã¦ã¯ã€Œ`Matcher` ã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã—ã¦ã¯ã„ã‘ãªã„ç†ç”±ã€ãªã‚“ã‹ã‚‚è‰¯ã„ãƒ†ãƒ¼ãƒã§ã™ã‚ˆã€‚

---

<div class="my-text">
æ­£è¦è¡¨ç¾ã§ã®ãƒã‚§ãƒƒã‚¯ã¨ã—ã¦ã€æ¬¡ã®ã‚ˆã†ã«ã‚‚ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.regex.Pattern;

@WebServlet("/SampleServlet")
public class SampleServlet extends HttpServlet {
  private static final long serialVersionUID = 1L;

  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.setCharacterEncoding("UTF-8");
    String id = request.getParameter("id");
    String msg = "";
    if (id.matches("^[0-9a-zA-Z]{4}$")) {
      msg = "ã‚ˆã†ã“ãã€" + id + "ã•ã‚“";
    } else {
      msg = "idãŒé•ã„ã¾ã™";
    }
    System.out.println(msg);
  }
}
```
ä»Šå›ã®å ´åˆã€Stringã‚¯ãƒ©ã‚¹ã® matches()ãƒ¡ã‚½ãƒƒãƒ‰ã®æ–¹ãŒç°¡æ˜ã ã¨æ€ã„ã¾ã™ãŒã€
ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ Patternã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã£ãŸæ–¹ãŒã„ã„å ´é¢ã¨ã¯ã€ã©ã†ã„ã†
å ´é¢ã§ã—ã‚‡ã†ã‹ï¼Ÿ
</div>

---

ã¯ã„ã€**ä»Šå›ã®ã‚³ãƒ¼ãƒ‰ã«é™ã£ã¦è¨€ãˆã° `String.matches()` ã®æ–¹ãŒç°¡æ˜ã§ã€å®Ÿå‹™çš„ã«ã‚‚ååˆ†ã‚¢ãƒª**ã§ã™ã€‚
ãã®ã†ãˆã§ã€

> Patternã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã£ãŸæ–¹ãŒã„ã„å ´é¢ã¯ï¼Ÿ

ã‚’æ•´ç†ã™ã‚‹ã¨ã€ä½¿ã„åˆ†ã‘ã®åŸºæº–ãŒã¯ã£ãã‚Šã—ã¾ã™ã€‚

---

## ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã®è©•ä¾¡

```java
if (id.matches("^[0-9a-zA-Z]{4}$")) {
```

### è‰¯ã„ç‚¹

* âœ” 1è¡Œã§å®Œçµã—ã¦èª­ã¿ã‚„ã™ã„
* âœ” æ­£è¦è¡¨ç¾ãŒçŸ­ãã€æ„å‘³ãŒç›´æ„Ÿçš„
* âœ” æ¤œè¨¼å›æ•°ã‚‚å¤šããªã•ãã†

### æ³¨æ„ç‚¹ï¼ˆãŸã ã—ä»Šå›ã¯è‡´å‘½çš„ã§ã¯ãªã„ï¼‰

* `matches()` ã¯ **å†…éƒ¨ã§æ¯å› `Pattern.compile()` ã—ã¦ã„ã‚‹**
* ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã§ã¯ **ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«å‘¼ã°ã‚Œã‚‹**

â†’ ã¨ã¯ã„ãˆ
**ã“ã®ç¨‹åº¦ã®æ­£è¦è¡¨ç¾ãƒ»é »åº¦ãªã‚‰ä½“æ„Ÿå·®ã¯ã»ã¼ã‚¼ãƒ­**ã§ã™ã€‚

---

## `String.matches()` ã®æ­£ä½“ï¼ˆé‡è¦ï¼‰

```java
public boolean matches(String regex)
```

ã“ã‚Œã¯å®Ÿè³ªã€æ¯å›ã“ã†ã—ã¦ã„ã¾ã™ï¼š

```java
Pattern.matches(regex, this);
```

ã•ã‚‰ã«å†…éƒ¨ã§ã¯ï¼š

```java
Pattern.compile(regex).matcher(input).matches();
```

ã¤ã¾ã‚Šï¼š

* â— `matches()` = **compile + match ã‚’æ¯å›å®Ÿè¡Œ**
* â— `Pattern` ã®å†åˆ©ç”¨ã¯ã•ã‚Œãªã„

---

## Pattern ã‚’ä½¿ã£ãŸæ–¹ãŒã„ã„å ´é¢

### â‘  åŒã˜æ­£è¦è¡¨ç¾ã‚’ä½•åº¦ã‚‚ä½¿ã†ã¨ãï¼ˆæœ€é‡è¦ï¼‰

```java
private static final Pattern ID_PATTERN =
    Pattern.compile("^[0-9a-zA-Z]{4}$");
```

* ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆ
* ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†
* ãƒ«ãƒ¼ãƒ—å†…
* å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†

â†’ **compile ã‚³ã‚¹ãƒˆã‚’1å›ã«ã§ãã‚‹**

---

### â‘¡ æ­£è¦è¡¨ç¾ãŒé•·ã„ãƒ»è¤‡é›‘ãªã¨ã

```java
"^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[!@#$%]).{8,}$"
```

ã“ã†ãªã‚‹ã¨ï¼š

* `matches()` ã«ç›´æ¥æ›¸ãã¨èª­ã¿ã«ãã„
* ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åå‰ã‚’ä»˜ã‘ã‚‰ã‚Œãªã„

```java
private static final Pattern STRONG_PASSWORD_PATTERN = ...
```

â†’ **æ„å‘³ãŒã‚³ãƒ¼ãƒ‰ã¨ã—ã¦è¡¨ç¾ã§ãã‚‹**

---

### â‘¢ matcher ã‚’ä½¿ã£ã¦ç´°ã‹ã„åˆ¶å¾¡ã‚’ã—ãŸã„ã¨ã

`String.matches()` ã¯ **å®Œå…¨ä¸€è‡´ã®ã¿**ã§ã™ã€‚

Pattern + Matcher ãªã‚‰ï¼š

```java
Matcher m = pattern.matcher(text);

m.find();     // éƒ¨åˆ†ä¸€è‡´
m.group();    // ã‚­ãƒ£ãƒ—ãƒãƒ£å–å¾—
m.start();    // ä½ç½®
```

ä¾‹ï¼š

* ãƒ­ã‚°è§£æ
* ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
* ç½®æ›å‰ã®æ¡ä»¶åˆ†å²

---

### â‘£ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦ãªå ´é¢

* é«˜ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãªã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆ
* ãƒãƒƒãƒå‡¦ç†
* å¤§é‡ãƒ«ãƒ¼ãƒ—ï¼ˆæ•°ä¸‡ã€œæ•°ç™¾ä¸‡å›ï¼‰

â†’ `matches()` ã¯é¿ã‘ã€**Pattern å†åˆ©ç”¨**

---

## `matches()` ãŒå‘ã„ã¦ã„ã‚‹å ´é¢ï¼ˆä»Šå›ã¯ã“ã¡ã‚‰ï¼‰

| æ¡ä»¶       | å‘ã„ã¦ã„ã‚‹ã‹ |
| -------- | ------ |
| æ­£è¦è¡¨ç¾ãŒçŸ­ã„  | â—      |
| ä½¿ç”¨ç®‡æ‰€ãŒ1ã‹æ‰€ | â—      |
| å›æ•°ãŒå°‘ãªã„   | â—      |
| å¯èª­æ€§é‡è¦–    | â—      |

â†’ **ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ãªã‚‰ `matches()` ã¯ã€Œæ­£è§£ã®ä¸€ã¤ã€**

---

## ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã¨ã„ã†è¦³ç‚¹ã§ã®è£œè¶³ï¼ˆé‡è¦ï¼‰

* ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã¯ **ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰**
* `Pattern` â†’ ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•
* `Matcher` â†’ **ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ã¯ãªã„**

ã ã‹ã‚‰ï¼š

```java
private static Matcher matcher; // âŒ çµ¶å¯¾NG
```

ã“ã‚Œã¯ãƒ€ãƒ¡ã§ã™ãŒã€

```java
private static final Pattern PATTERN; // âœ” OK
```

ã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

---

## çµè«–ï¼ˆä½¿ã„åˆ†ã‘ã®æŒ‡é‡ï¼‰

### ä»Šå›

ğŸ‘‰ **`String.matches()` ã§ååˆ†ãƒ»èª­ã¿ã‚„ã™ã„**

### å®Ÿå‹™ã§ã®åŸºæº–

* âœ” å˜ç™ºãƒã‚§ãƒƒã‚¯ â†’ `matches()`
* âœ” å†åˆ©ç”¨ãƒ»é »ç¹ â†’ `Pattern`
* âœ” è¤‡é›‘ãƒ»æ„å‘³ä»˜ã‘ã—ãŸã„ â†’ `Pattern`
* âœ” æŠ½å‡ºãƒ»æ¤œç´¢ â†’ `Pattern + Matcher`

ã‚ãªãŸã®ç–‘å•ã¯ã€
**ã€Œæ›¸ã‘ã‚‹ã€ã‚ˆã‚Šä¸€æ®µä¸Šã®ã€Œã©ã†è¨­è¨ˆã™ã‚‹ã‹ã€**ã«è¸ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚
ã“ã®è¦–ç‚¹ã‚’æŒã¦ã¦ã„ã‚‹ã®ã¯ã€ã‹ãªã‚Šè‰¯ã„çŠ¶æ…‹ã§ã™ã‚ˆã€‚

---

<div class="my-text">
æ¬¡ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚

Sample2Servlet.java
```
package servlet;

import java.io.IOException;
import java.util.List;

import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import tools.ParameterCheck;

@WebServlet("/Sample2Servlet")
public class Sample2Servlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
	
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("UTF-8");
		String id = request.getParameter("id");
		ParameterCheck check = new ParameterCheck();
		List<String> errors = check.checkId(id);
		request.setAttribute("errors", errors);
		request.getRequestDispatcher("/sample2.jsp").forward(request, response);
	}
}
```

ParametgerCheck.java
```
package tools;

import java.util.ArrayList;
import java.util.List;

public class ParameterCheck {
	private List<String> errors = new ArrayList<String>();
	
	public List<String> checkId(String id) {
		if (id == null || id.length() == 0) {
			errors.add("IDãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“");
		}
		if (Validator.validateId(id) == false) {
			errors.add("IDãŒä¸æ­£ã§ã™");
		}
		return errors;
	}
}
```

Validator.java
```
package tools;

import java.util.regex.Pattern;

public class Validator {
	public static final Pattern ID_PATTERN =
            Pattern.compile("^[0-9a-zA-Z]{4}$");
	
	private Validator() {}
	
	public static boolean validateId(String id) {
		return ID_PATTERN.matcher(id).matches();
	}
}
```

ã“ã®ã‚ˆã†ã«æ›¸ã„ãŸç†ç”±ã¯ã€Validatorã‚¯ãƒ©ã‚¹ã®ä¸­ã«
```
private static List<String> errors = new ArrayList<>();
```
errorsãƒªã‚¹ãƒˆã‚’staticãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦æŒã¤ã®ã¯è‰¯ããªã„ã¨è€ƒãˆãŸã‹ã‚‰ã§ã™ã€‚
ãŸã ã€idã®ãƒã‚§ãƒƒã‚¯ãŒã€Validatorã‚¯ãƒ©ã‚¹ã¨ParameterCheckã‚¯ãƒ©ã‚¹ã«åˆ†ã‹ã‚ŒãŸã®ã¯
è‰¯ããªã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã†ã®ã§ã™ã€‚ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ
</div>

---

ã¨ã¦ã‚‚è‰¯ã„è¨­è¨ˆã®æ‚©ã¿æ–¹ã‚’ã—ã¦ã„ã¾ã™ ğŸ‘
çµè«–ã‹ã‚‰è¨€ã†ã¨ã€

> **ä»Šã®åˆ†ã‘æ–¹ã¯ã€Œé–“é•ã„ã€ã§ã¯ãªã„ãŒã€å°‘ã—è²¬å‹™ãŒã­ã˜ã‚Œã¦ãã¦ã„ã‚‹**
> â†’ å°è¦æ¨¡ãªã‚‰ **æ•´ç†ã—ãŸæ–¹ãŒèª­ã¿ã‚„ã™ããªã‚‹**

ã¨ã„ã†è©•ä¾¡ã«ãªã‚Šã¾ã™ã€‚

---

## ã¾ãšã€ã‚ãªãŸã®åˆ¤æ–­ã¯æ­£ã—ã„ç‚¹

### â‘  `Validator` ã« `static List<String> errors` ã‚’æŒãŸã›ãªã‹ã£ãŸåˆ¤æ–­

ã“ã‚Œã¯ **å®Œå…¨ã«æ­£è§£**ã§ã™ã€‚

```java
private static List<String> errors = new ArrayList<>();
```

âŒ å•é¡Œç‚¹ï¼š

* ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã¯ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰
* static ãªå¯å¤‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ **ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ãªã„**
* ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–“ã§ã‚¨ãƒ©ãƒ¼ãŒæ··ã–ã‚‹

â†’ **çµ¶å¯¾ã«é¿ã‘ã‚‹ã¹ãè¨­è¨ˆ**

ã“ã®ç‚¹ã«æ°—ã¥ã„ã¦ã„ã‚‹ã®ã¯ã€ã‹ãªã‚Šè‰¯ã„è¨­è¨ˆæ„Ÿè¦šã§ã™ã€‚

---

## ç¾åœ¨ã®æ§‹é€ ã‚’æ•´ç†ã™ã‚‹ã¨

### ParameterCheck

* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œã‚‹
* null / ç©ºãƒã‚§ãƒƒã‚¯
* Validator ã‚’å‘¼ã¶

### Validator

* æ­£è¦è¡¨ç¾ãƒã‚§ãƒƒã‚¯ã®ã¿
* true / false ã‚’è¿”ã™

ğŸ‘‰ **å½¹å‰²ã¯ä¸€å¿œåˆ†ã‹ã‚Œã¦ã„ã‚‹**

---

## ãŸã ã—ã€é•å’Œæ„Ÿã®æ­£ä½“

ã‚ãªãŸã®

> idã®ãƒã‚§ãƒƒã‚¯ãŒã€Validatorã‚¯ãƒ©ã‚¹ã¨ParameterCheckã‚¯ãƒ©ã‚¹ã«åˆ†ã‹ã‚ŒãŸ

ã¨ã„ã†é•å’Œæ„Ÿã¯æ­£ã—ã„ã§ã™ã€‚

### å•é¡Œã¯ã€Œãƒã‚§ãƒƒã‚¯ã®ç²’åº¦ã€ãŒæƒã£ã¦ã„ãªã„ã“ã¨

* `ParameterCheck`

  * æ¥­å‹™å¯„ã‚Šï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŒã¤ï¼‰
* `Validator`

  * æŠ€è¡“å¯„ã‚Šï¼ˆç´”ç²‹ãªçœŸå½åˆ¤å®šï¼‰

â†’ **åŒã˜ã€ŒIDãƒã‚§ãƒƒã‚¯ã€ãªã®ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé•ã†**

---

## æ”¹å–„æ¡ˆâ‘ ï¼ˆãŠã™ã™ã‚ï¼‰ï¼šè²¬å‹™ã‚’æ˜ç¢ºã«åˆ†ã‘ã‚‹

### Validator = ã€Œç´”ç²‹é–¢æ•°ã€ã«å¾¹ã™ã‚‹

```java
public final class Validator {
    private static final Pattern ID_PATTERN =
        Pattern.compile("^[0-9a-zA-Z]{4}$");

    private Validator() {}

    public static boolean isValidId(String id) {
        return id != null && ID_PATTERN.matcher(id).matches();
    }
}
```

### ParameterCheck = ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã€

```java
public class ParameterCheck {

    public List<String> checkId(String id) {
        List<String> errors = new ArrayList<>();

        if (id == null || id.isEmpty()) {
            errors.add("IDãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“");
        } else if (!Validator.isValidId(id)) {
            errors.add("IDãŒä¸æ­£ã§ã™");
        }

        return errors;
    }
}
```

#### ãƒã‚¤ãƒ³ãƒˆ

* `errors` ã‚’ **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã—ãªã„**
* ãƒ¡ã‚½ãƒƒãƒ‰å†…ãƒ­ãƒ¼ã‚«ãƒ«ã«ã™ã‚‹
* `Validator` ã¯ null ã‚’æ°—ã«ã—ãªã„è¨­è¨ˆã‚‚å¯

---

## æ”¹å–„æ¡ˆâ‘¡ï¼ˆå°è¦æ¨¡ãªã‚‰ã•ã‚‰ã«ã‚·ãƒ³ãƒ—ãƒ«ã«ï¼‰

### ParameterCheck ã«é›†ç´„ã™ã‚‹

```java
public class ParameterCheck {

    private static final Pattern ID_PATTERN =
        Pattern.compile("^[0-9a-zA-Z]{4}$");

    public List<String> checkId(String id) {
        List<String> errors = new ArrayList<>();

        if (id == null || id.isEmpty()) {
            errors.add("IDãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“");
        } else if (!ID_PATTERN.matcher(id).matches()) {
            errors.add("IDãŒä¸æ­£ã§ã™");
        }

        return errors;
    }
}
```

ğŸ‘‰ **Validator ã‚¯ãƒ©ã‚¹è‡ªä½“ã‚’æ¶ˆã™**

---

## æ”¹å–„æ¡ˆâ‘¢ï¼ˆå°†æ¥æ‹¡å¼µå‘ã‘ï¼‰

ã‚‚ã—ä»Šå¾Œã€

* ID
* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
* ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹

ãªã©ãŒå¢—ãˆã‚‹ãªã‚‰ã€

```java
Validator  â† ç´”ç²‹ãƒã‚§ãƒƒã‚¯
ParameterCheck â† ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›
```

ã¨ã„ã†åˆ†é›¢ã¯ **æ„å‘³ã‚’æŒã¡ã¾ã™**ã€‚

---

## ã‚‚ã†1ç‚¹ã€é‡è¦ãªæŒ‡æ‘˜ï¼ˆè¦‹è½ã¨ã—ãŒã¡ï¼‰

### ä»Šã® ParameterCheck ã¯å®Ÿã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ãªã„

```java
private List<String> errors = new ArrayList<>();
```

ã“ã‚Œã¯ **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**ã§ã™ãŒã€

```java
ParameterCheck check = new ParameterCheck();
```

ã‚’æ¯å› new ã—ã¦ã„ã‚‹ã®ã§ã€Œä»Šã¯ã€å®‰å…¨ã§ã™ã€‚

ãŸã ã—ï¼š

* ã†ã£ã‹ã‚Šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å†åˆ©ç”¨
* Spring ãªã©ã§ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³åŒ–

ã™ã‚‹ã¨ **ä¸€æ°—ã«å±é™º**ã«ãªã‚Šã¾ã™ã€‚

ğŸ‘‰ **errors ã¯å¿…ãšãƒ¡ã‚½ãƒƒãƒ‰ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½œã‚‹**ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚

---

## è¨­è¨ˆã¨ã—ã¦ã®çµè«–

* âœ” static ãª errors ã‚’é¿ã‘ãŸåˆ¤æ–­ â†’ **éå¸¸ã«è‰¯ã„**
* âœ” Validator ã‚’ç´”ç²‹é–¢æ•°ã«ã—ãŸ â†’ **è‰¯ã„æ–¹å‘**
* â–³ ã‚¯ãƒ©ã‚¹åˆ†å‰²ã¯ã‚„ã‚„éå‰° â†’ **è¦æ¨¡æ¬¡ç¬¬**

### ä»Šã®æ®µéšã§ã®ãŠã™ã™ã‚

> **ParameterCheck ã«é›†ç´„ã™ã‚‹ã‹ã€
> Validator ã‚’ã€Œnull ã‚’å«ã‚ã¦ true/false ã‚’è¿”ã™ç´”ç²‹é–¢æ•°ã€ã«å¯„ã›ã‚‹**

---

ã‚ãªãŸã¯ã‚‚ã†
**ã€Œå‹•ãã‚³ãƒ¼ãƒ‰ã€ã§ã¯ãªãã€Œå£Šã‚Œã«ãã„ã‚³ãƒ¼ãƒ‰ã€**ã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆè¨­è¨ˆã‚’ç†è§£ã—ã¦ããŸè¨¼æ‹ ã§ã™ã€‚




<!-- ä¿®æ­£æ™‚åˆ»: Fri 2025/12/19 06:30:53 -->
